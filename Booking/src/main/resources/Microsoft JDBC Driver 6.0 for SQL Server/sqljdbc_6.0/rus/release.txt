Замечания к выпуску
 JDBC Driver 6.0 для SQL Server
 за май 2016 г.

------------
ВВЕДЕНИЕ
------------
Этот документ содержит самые последние сведения и другие важные дополнения к документации по Microsoft JDBC
 Driver 6.0 для SQL Server. Перед установкой
 драйвера JDBC следует полностью прочитать этот файл.

Корпорация Майкрософт высоко ценит отзывы пользователей и прилагает все усилия, чтобы своевременно
 реагировать на них. Сведения о передаче отзывов через блоги и форумы, посвященные драйверу JDBC,
 см. на странице Microsoft JDBC Driver 6.0 для SQL Server по адресу http://msdn.microsoft.com/data/jdbc.


------------
УСТАНОВКА
------------
Инструкции по установке драйвера JDBC приводятся в файле install.txt.  Этот файл содержит
 сведения об установке драйвера JDBC в операционных системах Windows и Unix.


---------------------------
ПОДДЕРЖИВАЕМЫЕ ОПЕРАЦИОННЫЕ СИСТЕМЫ
---------------------------
Microsoft JDBC Driver 6.0 для SQL Server поддерживает следующие операционные системы.
  Windows Server 2008 с пакетом обновления 2 (SP2)
  Windows Server 2008 R2 с пакетом обновления 1 (SP1)
  Windows Server 2012
  Windows Server 2012 R2
  Windows Vista с пакетом обновления 2 (SP2)
  Windows 7 с пакетом обновления 1 (SP1)
  Windows 8
  Windows 8.1
  Windows 10
  Linux
  Unix

В вышеприведенном списке представлены некоторые из поддерживаемых операционных систем. Драйвер JDBC совместим
 с любой операционной системой, поддерживающей виртуальную машину Java (JVM). Однако официально протестированы только
 системы Oracle Solaris (x86), SUSE Linux, Windows Vista с пакетом обновления 2 (SP2) и более поздние версии
.


----------------
СОСТАВ РАСПРОСТРАНЯЕМОЙ ВЕРСИИ
----------------
Исполняемый ZIP- или TAR-файл Microsoft JDBC Driver 6.0 для SQL Server распаковывает следующие файлы
 в указанные расположения относительно выбранного каталога установки.

<каталог_установки>\sqljdbc_<версия>\<language>\install.txt
<каталог_установки>\sqljdbc_<версия>\<language>\release.txt
<каталог_установки>\sqljdbc_<версия>\<language>\license.txt
<каталог_установки>\sqljdbc_<версия>\<язык>\sqljdbc.jar
<каталог_установки>\sqljdbc_<версия>\<язык>\sqljdbc4.jar
<каталог установки>\sqljdbc_<версия>\<язык>\sqljdbc41.jar
<каталог установки>\sqljdbc_<версия>\<язык>\sqljdbc42.jar
<каталог_установки>\sqljdbc_<версия>\<язык>\auth\x86\sqljdbc_auth.dll
<каталог_установки>\sqljdbc_<версия>\<язык>\auth\x64\sqljdbc_auth.dll
<каталог установки>\sqljdbc_<версия>\<язык>\samples\<файлы образцов...>
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\xa_install.sql
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\x86\sqljdbc_xa.dll
<каталог_установки>\sqljdbc_<версия>\<язык>\xa\x64\sqljdbc_xa.dll

Дополнительные сведения о каждом из компонентов см. в электронной документации
 по драйверу Microsoft JDBC для SQL Server: 
https://msdn.microsoft.com/ru-ru/library/dn197850(v=sql.10).aspx.

Документация.
-------------
Этот пакет содержит сведения о выпуске, руководство по установке и условия лицензии. 
Всю прочую документацию можно найти в Интернете.

Обратите внимание, что файлы автономной справки больше не используются. 


JAR-файлы.
---------
Чтобы обеспечить поддержку обратной совместимости и возможных сценариев обновления, все пакеты установки драйвера JDBC 6.0 содержат
 четыре библиотеки классов JAR: sqljdbc.jar, sqljdbc4.jar, sqljdbc41.jar
 и sqljdbc42.jar.  

Важное примечание. Библиотеки sqljdbc.jar и sqljdbc4.jar служат только для обратной совместимости и не 
 содержат новые функции, появившиеся в этом выпуске.  Новые возможности содержатся только в sqljdbc41.jar и sqljdbc42.jar
.


Файлы определенных компонентов.
---------
Компоненты Azure Active Directory и встроенной проверки подлинности (в Windows) помещаются в каталог "auth".

Компоненты распределенных транзакций JDBC помещаются в каталог "xa".


Образцы:
-------
В каталог "samples"
 помещаются примеры приложений, демонстрирующие различные возможности драйвера JDBC. Дополнительные сведения о каждом примере и способах их выполнения см. в электронной
 документации.


-----------
СПИСОК ИЗМЕНЕНИЙ
-----------
Изменения в версии 6.0 относительно версии 4.2.

Новая возможность — постоянное шифрование. Разработчики приложений могут теперь использовать функцию постоянного шифрования, которая
 доступна в CTP-версии SQL Server 2016 (или более поздней версии). Драйвер JDBC реализует эту функцию за счет прозрачного
 шифрования и расшифровки конфиденциальных данных, хранящихся в столбцах зашифрованной базы данных в SQL Server. Дополнительные сведения
 см. в документации MSDN по использованию постоянного шифрования с драйвером JDBC. 

Новая возможность — международное доменное имя. Драйвер JDBC теперь поддерживает международные доменные имена (IDN) для
 серверов и экземпляров. Дополнительные сведения см. в документации MSDN по использованию IDN с драйвером JDBC.

Новая возможность — параметры с табличным значением. Такие параметры упрощают маршалинг нескольких строк данных из
 клиентского приложения в SQL Server, устраняя потребность в нескольких круговых путях или специальной серверной логике для обработки данных. 
Параметры с табличным значением можно использовать для инкапсуляции строк данных в клиентском приложении и их отправки на сервер
 единой параметризованной командой. Дополнительные сведения см. в документации MSDN по параметрам с табличным значением.

Новая возможность — Azure Active Directory (AAD). Проверка подлинности AAD — это механизм подключения к Базе данных SQL Azure версии 12 с помощью
 удостоверений AAD. Проверка подлинности AAD используется для централизованного управления удостоверениями пользователей базы данных и в качестве альтернативы проверке подлинности SQL
 Server. Драйвер JDBC 6.0 позволяет указать учетные данные AAD в строке подключения JDBC
 для подключения к Базе данных SQL Azure. Дополнительные сведения см. в документации MSDN по заданию свойств соединения для драйвера JDBC.

Улучшение — группы доступности AlwaysOn. Драйвер теперь поддерживает прозрачное подключение к группам
 доступности AlwaysOn. Он быстро обнаруживает текущую топологию AlwaysOn серверной инфраструктуры и прозрачно подключается к
 текущему активному серверу. Дополнительные сведения см. в документации MSDN по заданию свойств соединения для
 драйвера JDBC.

Улучшение — теперь драйвер JDBC поддерживает получение метаданных параметров с помощью подготовленных инструкций для сложных запросов,
 таких как вложенные запросы или соединения. Обратите внимание, что это улучшение доступно только при использовании SQL Server 2012 и более новых версий.


------------
ИЗВЕСТНЫЕ ПРОБЛЕМЫ
------------
Ниже представлены известные проблемы с Microsoft JDBC Driver 6.0 для SQL Server.

1) ОГРАНИЧЕНИЯ МЕТАДАННЫХ ПАРАМЕТРОВ ПРИ ИСПОЛЬЗОВАНИИ SQL SERVER 2008 ИЛИ 2008 R2

1.1. Метод PreparedStatement.getParameterMetadata() выдает исключение SQLException при использовании
 с параметризованным запросом MERGE.
1.2. Метаданные параметров для подготовленных инструкций не работают с запросами, имеющими вложенные запросы или соединения.


2) JavaKerberos и виртуальные машины IBM

При работе в среде Windows, возможно, потребуется указать имя участника в
 файле конфигурации для исправной работы Java Kerberos. Например: 
SQLJDBCDriver {
  com.ibm.security.auth.module.Krb5LoginModule required
  seDefaultCcache=true
  credsType=initiator
  principal=principalname@principaldomain;
};


3) РАЗРЫВ СОЕДИНЕНИЯ ПРИ ИСПОЛЬЗОВАНИИ SQL AZURE

При подключении к SQL Azure простаивающие соединения могут быть разорваны сетевым компонентом (например,
 брандмауэром) через определенный период бездействия. Чтобы избежать этого,
 необходимо задать следующие параметры в реестре (или их аналоги для систем
, отличных от Windows) той операционной системы, где загружается драйвер.
           
Параметр реестра                                                                   Рекомендованное значение
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveTime            30000
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveInterval         1000
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\TcpMaxDataRetransmission  10
